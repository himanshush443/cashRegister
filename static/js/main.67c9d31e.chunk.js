(this["webpackJsonpsuperidea-app"]=this["webpackJsonpsuperidea-app"]||[]).push([[0],{102:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),i=a(17),r=a.n(i),s=(a(88),a(89),a(49)),o=a(26),l=a(32),m=a(135),d=a(136),j=a(133),u=a(137),p=a(138),b=a(140),h=a(139),g=a(141),f=a(71),x=a.n(f),O=a(69),y=a.n(O),v=a(70),S=a.n(v),N=a(131),B=a(43),k=B.a.initializeApp({apiKey:"AIzaSyCA9E0Xpz_7DmzS24R1-Ps3QuqXc8ZMlyA",authDomain:"cashregister-fc41b.firebaseapp.com",databaseURL:"https://cashregister-fc41b-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"cashregister-fc41b",storageBucket:"cashregister-fc41b.appspot.com",messagingSenderId:"189218978752",appId:"1:189218978752:web:757d7fede02559d146a625"}).firestore(),I=(B.a.auth(),B.a.storage()),P=a(7),C=Object(N.a)({payment:{width:300,border:"1px solid lightGrey",margin:20},paymentDate:{color:function(e){return e.color},fontSize:14,textAlign:"left"},paymentRemark:{color:function(e){return e.color},fontSize:18,textAlign:"left"},paymentAmount:{color:function(e){return e.color},fontSize:function(e){return e.fontSize},textAlign:"right"},imageStyle:{width:"100%",objectFit:"contain"}});var T=function(e){var t=e.amount,a=e.remark,n=e.imageUrl,c=e.typePayment,i=e.date,r=C({color:c?"lightGreen":"red",fontSize:c?"16px":"14px"});return Object(P.jsxs)(j.a,{className:r.payment,children:[Object(P.jsxs)(m.a,{container:!0,children:[Object(P.jsxs)(m.a,{item:!0,xs:6,children:[Object(P.jsx)(m.a,{className:r.paymentDate,children:i}),Object(P.jsx)(m.a,{className:r.paymentRemark,children:a})]}),Object(P.jsx)(m.a,{xs:2}),Object(P.jsxs)(m.a,{xs:4,className:r.paymentAmount,children:[c?"":"-",t]})]}),Object(P.jsx)("hr",{}),Object(P.jsx)(m.a,{xs:12,children:Object(P.jsx)("img",{className:r.imageStyle,src:n})})]})},w=Object(N.a)({signupForm:{display:"flex",justifyContent:"center",alignItems:"center"},root:{minWidth:200,width:400,marginTop:"5%",marginBottom:"5%",position:"fixed"},caption:{paddingTop:20,marginBottom:15,borderTop:"5px solid #3f50b5"},warning:{color:"red"},dateTime:{paddingTop:12,paddingBottom:24,borderTop:"1px solid lightGrey"},dateCss:{fontSize:"10px"},inputs:{marginBottom:12,width:"85%",marginLeft:4},progress:{width:"85%"},uploadImageFile:{display:"none"},submit:{width:"84%"},uploadImage:{textAlign:"left",fontSize:"15px",color:"#3f50b5",border:"1px solid lightGrey",padding:"0.5rem",fontFamily:"sans-serif",borderRadius:"0.3rem",cursor:"pointer",marginTop:"1rem"},uploadButton:{border:"none"},uploadIcon:{fontSize:13,paddingRight:10,paddingTop:15},uploadGrid:{marginBottom:9}});var A=function(){var e=w(),t=new Date,a=t.getDate()+"/"+(t.getMonth()+1)+"/"+t.getFullYear(),c=Object(n.useState)(t.toLocaleTimeString()),i=Object(l.a)(c,2),r=i[0],f=i[1];setInterval((function(){var e=(new Date).toLocaleTimeString();f(e)}),1e3);var O=Object(n.useState)(""),v=Object(l.a)(O,2),N=v[0],C=v[1],A=Object(n.useState)(null),z=Object(l.a)(A,2),D=z[0],F=z[1],R=Object(n.useState)(0),L=Object(l.a)(R,2),U=L[0],G=L[1],E=Object(n.useState)({amount:"",remark:"",finalBalance:0,typePayment:!1}),M=Object(l.a)(E,2),J=M[0],X=M[1],_=Object(n.useState)([]),q=Object(l.a)(_,2),K=q[0],Q=q[1],V=Object(n.useState)(0),W=Object(l.a)(V,2),Y=W[0],Z=W[1],H=function(e){var t,a;X(Object(o.a)(Object(o.a)({},J),{},Object(s.a)({},null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.name,null===e||void 0===e||null===(a=e.target)||void 0===a?void 0:a.value))),C("")};return Object(n.useEffect)((function(){k.collection("cashReg").orderBy("timestamp","desc").onSnapshot((function(e){Q(e.docs.map((function(e){return{id:e.id,payment:e.data()}})))}))}),[]),Object(n.useEffect)((function(){var e=K.reduce((function(e,t){t.id;var a=t.payment,n=a.typePayment?e+parseInt(a.amount):e-parseInt(a.amount);return console.log(n),n}),0);Z(e)}),[K]),Object(P.jsx)("div",{children:Object(P.jsx)("div",{className:e.signupForm,children:Object(P.jsxs)(m.a,{container:!0,children:[Object(P.jsx)(m.a,{sm:2}),Object(P.jsx)(m.a,{item:!0,md:4,children:Object(P.jsxs)(d.a,{className:e.root,children:[Object(P.jsx)("form",{children:Object(P.jsxs)(j.a,{children:[Object(P.jsx)(u.a,{className:e.caption,variant:"h5",component:"h2",children:"Cash Register"}),Object(P.jsxs)(m.a,{container:!0,spacing:1,className:e.dateTime,children:[Object(P.jsx)(m.a,{item:!0,xs:6,className:e.dateCss,children:Object(P.jsxs)(p.a,{className:e.dateIcon,variant:"outlined",color:"primary",children:[Object(P.jsx)(y.a,{}),a]})}),Object(P.jsx)(m.a,{item:!0,xs:6,className:e.timeCss,children:Object(P.jsxs)(p.a,{className:e.timeIcon,variant:"outlined",color:"primary",children:[Object(P.jsx)(S.a,{}),r]})})]}),Object(P.jsx)(b.a,{children:Object(P.jsx)(u.a,{className:e.warning,children:N})}),Object(P.jsx)(h.a,{className:e.inputs,label:"Amount",name:"amount",type:"number",onChange:function(e){return H(e)},variant:"outlined"}),Object(P.jsx)(h.a,{className:e.inputs,label:"Remarks",name:"remark",type:"text",onChange:function(e){return H(e)},variant:"outlined"}),Object(P.jsx)("progress",{className:e.progress,value:U,max:"100"}),Object(P.jsx)(m.a,{container:!0,children:Object(P.jsxs)(m.a,{item:!0,xs:6,className:e.uploadGrid,children:[Object(P.jsx)("input",{onChange:function(e){e.target.files[0]&&F(e.target.files[0])},type:"file",id:"actual-btn",hidden:!0}),Object(P.jsxs)("label",{type:"button",for:"actual-btn",className:e.uploadImage,children:[Object(P.jsx)(x.a,{className:e.uploadIcon}),"Attach Image"]})]})}),Object(P.jsx)(m.a,{children:Object(P.jsxs)(u.a,{children:["Debit",Object(P.jsx)(g.a,{checked:J.typePayment,color:"primary",name:"typePayment",onChange:function(){X(Object(o.a)(Object(o.a)({},J),{},{typePayment:!J.typePayment}))},inputProps:{"aria-label":"primary checkbox"}}),"Credit"]})}),Object(P.jsx)(b.a,{textAlign:"center",children:Object(P.jsx)(p.a,{className:e.submit,variant:"contained",color:"primary",type:"submit",onClick:function(e){return function(e){e.preventDefault(),""!==J.amount&&""!==J.remark&&null!=D?(J.typePayment?X(Object(o.a)(Object(o.a)({},J),{},{finalBalance:J.finalBalance+J.amount})):X(Object(o.a)(Object(o.a)({},J),{},{finalBalance:J.finalBalance-J.amount})),I.ref("images/".concat(D.name)).put(D).on("state_changed",(function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100);G(t)}),(function(e){console.log(e),alert(e.message)}),(function(){I.ref("images").child(D.name).getDownloadURL().then((function(e){k.collection("cashReg").add({timestamp:B.a.firestore.FieldValue.serverTimestamp(),amount:J.amount,remark:J.remark,typePayment:J.typePayment,finalBalance:J.finalBalance,date:a,imageUrl:e}),console.log("Data Uploaded"),G(0),X({amount:"",remark:"",typePayment:!1}),C("")}))}))):C("Please fill all fields and bills!")}(e)},children:"Save"})})]})}),Object(P.jsx)(j.a,{children:Object(P.jsxs)(m.a,{container:!0,children:[Object(P.jsx)(m.a,{item:!0,xs:6,children:Object(P.jsx)(u.a,{children:"Final Balance : "})}),Object(P.jsx)(m.a,{item:!0,xs:6,children:Y})]})})]})}),Object(P.jsx)(m.a,{md:1}),Object(P.jsx)(m.a,{md:4,className:e.paymentList,children:Object(P.jsx)("div",{children:K.map((function(e){var t=e.id,a=e.payment;return Object(P.jsx)(T,{imageUrl:a.imageUrl,amount:a.amount,remark:a.remark,typePayment:a.typePayment,date:a.date},t)}))})})]})})})};var z=function(){return Object(P.jsx)("div",{className:"App",children:Object(P.jsx)(A,{})})},D=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,144)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,i=t.getLCP,r=t.getTTFB;a(e),n(e),c(e),i(e),r(e)}))};r.a.render(Object(P.jsx)(c.a.StrictMode,{children:Object(P.jsx)(z,{})}),document.getElementById("root")),D()},88:function(e,t,a){},89:function(e,t,a){}},[[102,1,2]]]);
//# sourceMappingURL=main.67c9d31e.chunk.js.map